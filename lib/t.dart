import 'dart:typed_data';
import 'package:cbor/cbor.dart';
import 'tools.dart';
import 'ic_tools.dart';
import 'candid/candid.dart';
import 'candid/candid_types.dart';




Future<void> main() async {
    await t();
}


Future<void> t() async {
    print('trying ic');
    Canister can = Canister('ryjl3-tyaaa-aaaaa-aaaba-cai');
    List candid_sponse = await can.call(calltype: 'call', methodName: 'account_balance_dfx'); // List<CandidType>
    print(candid_sponse);



    print('parsing candidbytes: ');
    // Uint8List candidbytes = Uint8List.view(hexToBytes('4449444C016C01800175020071DEADBEEF03466F6F')!);
    // Uint8List candidbytes = Uint8List.view(hexToBytes('4449444c046c04efd6e40271e1edeb4a71a2f5ed880401c6a4a19806026d7b6d036c02007101710100012f03474554001104686f7374276663686f732d65616161612d61616161652d6161616f712d6361692e7261772e6963302e61707009782d7265616c2d69700c3230392e362e36352e3130350f782d666f727761726465642d666f720c3230392e362e36352e31303511782d666f727761726465642d70726f746f0568747470730a636f6e6e656374696f6e05636c6f73650a757365722d6167656e74444d6f7a696c6c612f352e3020285831313b204c696e7578207838365f36343b2072763a39302e3029204765636b6f2f32303130303130312046697265666f782f39302e30066163636570744a746578742f68746d6c2c6170706c69636174696f6e2f7868746d6c2b786d6c2c6170706c69636174696f6e2f786d6c3b713d302e392c696d6167652f776562702c2a2f2a3b713d302e380f6163636570742d6c616e67756167650e656e2d55532c656e3b713d302e350f6163636570742d656e636f64696e6711677a69702c206465666c6174652c20627203646e74013107726566657265723068747470733a2f2f66786137372d66696161612d61616161652d6161616e612d6361692e7261772e6963302e6170702f19757067726164652d696e7365637572652d726571756573747301310e7365632d66657463682d6465737408646f63756d656e740e7365632d66657463682d6d6f6465086e617669676174650e7365632d66657463682d736974650973616d652d736974650e7365632d66657463682d75736572023f3106636f6f6b696583015f67615f33314c373544534e59433d4753312e312e313632353533343230352e34322e302e313632353533343230352e303b205f67613d4741312e312e3238333636313535342e313632313338303933383b205f67615f35504d56334b533330573d4753312e312e313632353433333032332e372e312e313632353433333432342e30')!);
    Uint8List candidbytes = Uint8List.view(hexToBytes('4449444c016b04efd6e40271e1edeb4a72a2f5ed880473c6a4a1980674010000044449444c')!);
    List candidsponse = candidsponsebytesasthedarttypes(candidbytes);
    print(candidsponse);
    print(candidsponse[0].runtimeType);
    
}


